<section class="cases" id="cases">
    <div class="container">
        <span class="cases__pretitle">How can we help you</span>
        <h2 class="cases__title">Cases we work with.</h2>
        <p class="cases__description">
            Whatever your issue is, we can help you with it.
        </p>


         <div class="cases__slider-controls" id="cases__sider__controls">
                <button> < </button>
                <button> > </button>
        </div>
        <div class="cases__slider-swiper" id="cases__sider__root">

            <div class="swiper-wrapper" id="casses-slider">

                <div class="swiper-slide case">
                    <img src="img/practice-areas/business.webp" alt="Business Icon" class="case__icon" width="345" />
                    <h3 class="case__title">Business & Financing</h3>
                    <ul class="case__list">
                        <li>Banking and finance</li>
                        <li>Business formation</li>
                        <li>Contracts</li>
                    </ul>
                    <a href="practice-areas.html">
                        <button class="btn">Learn more</button>
                    </a>
                </div>

                <div class="swiper-slide case">
                    <img src="img/practice-areas/estate.jpg" alt="Business Icon" class="case__icon" width="345" />
                    <h3 class="case__title">Estate Planning</h3>
                    <ul class="case__list">
                        <li>Protecting assets</li>
                        <li>Avoiding probate</li>
                        <li>Succession strategy</li>
                    </ul>
                    <a href="practice-areas.html">
                        <button class="btn">Learn more</button>
                    </a>
                </div>

                <div class="swiper-slide case">
                    <img src="img/practice-areas/family.jpg" alt="Business Icon" class="case__icon" width="345" />
                    <h3 class="case__title">Family Issues</h3>
                    <ul class="case__list">
                        <li>Custody and support</li>
                        <li>Dissolution</li>
                        <li>Mediation</li>
                    </ul>
                    <a href="practice-areas.html">
                        <button class="btn">Learn more</button>
                    </a>
                </div>

                <div class="swiper-slide case">
                    <img src="img/practice-areas/employment.jpg" alt="Business Icon" class="case__icon" width="345" />
                    <h3 class="case__title">Employment and Labor</h3>
                    <ul class="case__list">
                        <li>Collective bargaining</li>
                        <li>Personnel policies</li>
                        <li>Labor law</li>
                    </ul>
                    <a href="practice-areas.html">
                        <button class="btn">Learn more</button>
                    </a>
                </div>

                <div class="swiper-slide case">
                    <img src="img/practice-areas/dui.jpg" alt="Business Icon" class="case__icon" width="345" />
                    <h3 class="case__title">DUI/Criminal Defense</h3>
                    <ul class="case__list">
                        <li>Felonies & misdemeanors</li>
                        <li>DWI / DUI</li>
                        <li>Theft</li>
                    </ul>
                    <a href="practice-areas.html">
                        <button class="btn">Learn more</button>
                    </a>
                </div>

                <div class="swiper-slide case">
                    <img src="img/practice-areas/healthcare.jpg" alt="Business Icon" class="case__icon" width="345" />
                    <h3 class="case__title">Healthcare</h3>
                    <ul class="case__list">
                        <li>Administrative hearings</li>
                        <li>Fraud and abuse</li>
                        <li>Healthcare litigation</li>
                    </ul>
                    <a href="practice-areas.html">
                        <button class="btn">Learn more</button>
                    </a>
                </div>

            </div>
        </div>
    </div>
</section>
<script>
    
    // Configuractions;
    const ROOT_CONTAINER = 'cases__sider__root'
    const CONTAINER_ID = 'casses-slider';
    const CONTROLS_CONTAINER = 'cases__sider__controls';
    const MARGINS = 25;


    const sliderWrapper = document.getElementById(ROOT_CONTAINER);
    const container = document.getElementById(CONTAINER_ID);
    
    const [backControl, forwardControl] = document.getElementById(CONTROLS_CONTAINER).children;
    
    // Remebering static size of slider element;
    const slideWidth = container.children[0].clientWidth;

    const getInitialState = () => ({
        VIEW_BAR_LIMIT: (Math.floor(sliderWrapper.clientWidth / (slideWidth + MARGINS)) || 1),
        from: 0,
        to: Math.floor(sliderWrapper.clientWidth / slideWidth) - 1
    });
    
    // initing slider logic variables;
    let { VIEW_BAR_LIMIT, from, to } = getInitialState();
    let timeoutInterval = null;

    // Move carusel back;
    const onBack = () => {
        from -= VIEW_BAR_LIMIT;
        to -= VIEW_BAR_LIMIT;

        render(false);
    };

    // Move carusel forward;
    const onForward = () => {
        from += VIEW_BAR_LIMIT;
        to += VIEW_BAR_LIMIT;
        render(true);
    }

    // Detecting dynamic changing window size;
    window.onresize = () => {
        const initData = getInitialState();
        from = initData.from;
        to = initData.to;
        VIEW_BAR_LIMIT = initData.VIEW_BAR_LIMIT;
        render();
    }

    // attaching the event to DOM elemnt responsible for moving slides;
    backControl.onclick = onBack;
    forwardControl.onclick = onForward;

    // Global entry function;
    function render(isForw) {
        const slides = container.children;

        // validating current slides set;
        if(to >= slides.length) {
            to = getInitialState().to;
            from = getInitialState().from;
        } else if(from < 0) {
            from = slides.length - VIEW_BAR_LIMIT;
            to = slides.length - 1;
        }
    
        Array.from(slides).forEach((slide, index) => {
            // checking is visible
            const isVisible = index >= from && index <= to;

            // removing animation class by default;
            slide.className = slide.className.replace('cases__is-active', '') 
            
            // Do animation;
            if(isVisible && typeof isForw === 'boolean') 
                slide.className+= isForw ? ' cases__animate-forward' : ' cases__animate-back ';
            
            // Control of DOM    
            slide.style.display = isVisible ? 'inline-block' : 'none'
        });
    };

    // Doing initatial render;
    render();

</script>